<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Attrape les c≈ìurs üíñ</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --pink: #ff5fa2;
      --red: #ff3b5c;
      --dark: #7a0d2b;
      --white: #fff7fb;
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }

    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: "Quicksand", sans-serif;
      background: linear-gradient(160deg, #ffd0e5 0%, #ffb3c7 40%, #ff6f91 100%);
      color: var(--white);
    }

    .screen {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 24px;
      transition: opacity 0.6s ease, transform 0.6s ease;
      opacity: 1;
      transform: translateY(0);
    }

    .hidden {
      opacity: 0;
      pointer-events: none;
      transform: translateY(14px);
    }

    .bokeh {
      position: fixed;
      inset: 0;
      overflow: hidden;
      z-index: 0;
      pointer-events: none;
    }

    .bokeh span {
      position: absolute;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0));
      filter: blur(2px);
      animation: float 18s linear infinite;
      opacity: 0.6;
    }

    @keyframes float {
      from { transform: translateY(110vh) scale(0.8); }
      to { transform: translateY(-20vh) scale(1.2); }
    }

    .card {
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.35);
      border-radius: 24px;
      padding: 28px;
      max-width: 560px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(122, 13, 43, 0.25);
      backdrop-filter: blur(12px);
    }

    h1, h2 {
      margin: 0 0 12px;
      font-weight: 700;
    }

    p {
      margin: 0 0 20px;
      font-size: 1.1rem;
    }

    .primary-btn, .secondary-btn {
      border: none;
      padding: 12px 22px;
      border-radius: 999px;
      font-weight: 600;
      font-size: 1.05rem;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
      font-family: "Quicksand", sans-serif;
    }

    .primary-btn {
      background: linear-gradient(135deg, var(--red), var(--pink));
      color: white;
      box-shadow: 0 12px 30px rgba(255, 59, 92, 0.35);
    }

    .primary-btn:hover {
      transform: translateY(-2px) scale(1.02);
    }

    #yesBtn {
      padding: 18px 36px;
      font-size: 1.25rem;
      min-width: 200px;
      box-shadow: 0 16px 36px rgba(255, 59, 92, 0.4);
    }

    #noBtn {
      padding: 8px 14px;
      font-size: 0.9rem;
      min-width: 110px;
    }

    .game-screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      gap: 12px;
    }

    #gameArea {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    #scoreBoard {
      position: absolute;
      top: 16px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 255, 255, 0.2);
      padding: 10px 18px;
      border-radius: 999px;
      font-weight: 600;
      z-index: 5;
      box-shadow: 0 10px 20px rgba(122, 13, 43, 0.2);
    }

    #timerBoard {
      position: absolute;
      top: 16px;
      right: 16px;
      background: rgba(255, 255, 255, 0.2);
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 600;
      z-index: 5;
      box-shadow: 0 10px 20px rgba(122, 13, 43, 0.2);
    }

    .sound-toggle {
      position: absolute;
      top: 16px;
      left: 16px;
      background: rgba(255, 255, 255, 0.2);
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 600;
      z-index: 5;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .sound-toggle input {
      accent-color: #ff4f7b;
      cursor: pointer;
    }

    .heart {
      position: absolute;
      font-size: 2.4rem;
      cursor: pointer;
      filter: drop-shadow(0 10px 18px rgba(122, 13, 43, 0.2));
      animation-name: fall;
      animation-timing-function: linear;
    }

    .heart.gold {
      filter: drop-shadow(0 0 14px rgba(255, 215, 0, 0.8));
    }

    @keyframes fall {
      from {
        transform: translateY(-10vh);
      }
      to {
        transform: translateY(110vh);
      }
    }

    #victoryScreen {
      flex-direction: column;
      gap: 18px;
    }

    .dev-card {
      position: relative;
      background: rgba(20, 10, 20, 0.55);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .dev-card::before {
      content: "";
      position: absolute;
      top: 10px;
      left: 18px;
      width: 70px;
      height: 12px;
      border-radius: 999px;
      background: radial-gradient(circle at 10px 6px, #ff5f57 4px, transparent 5px),
        radial-gradient(circle at 30px 6px, #ffbd2e 4px, transparent 5px),
        radial-gradient(circle at 50px 6px, #28c840 4px, transparent 5px);
      opacity: 0.9;
    }

    .glow-text {
      animation: glow 1.8s ease-in-out infinite;
    }

    @keyframes glow {
      0%, 100% { text-shadow: 0 0 6px rgba(255, 255, 255, 0.6), 0 0 14px rgba(255, 95, 162, 0.6); }
      50% { text-shadow: 0 0 14px rgba(255, 255, 255, 0.9), 0 0 28px rgba(255, 59, 92, 0.8); }
    }

    .final-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      justify-content: center;
      position: relative;
      min-height: 70px;
    }

    #yesBtn {
      animation: pulse 1.8s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    #noBtn {
      background: rgba(255, 255, 255, 0.25);
      color: var(--white);
      border: 1px solid rgba(255, 255, 255, 0.5);
    }

    .shake {
      animation: shake 0.35s ease;
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-4px); }
      50% { transform: translateX(4px); }
      75% { transform: translateX(-3px); }
      100% { transform: translateX(0); }
    }

    #funMessages {
      font-size: 0.95rem;
      min-height: 24px;
    }

    #noErrorMessage {
      font-family: "Quicksand", sans-serif;
      font-weight: 600;
      color: #ffd7e7;
      text-shadow: 0 0 10px rgba(255, 79, 123, 0.6);
      min-height: 28px;
    }

    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background: #fff;
      opacity: 0.9;
      animation: confetti-fall 1.8s linear forwards;
    }

    @keyframes confetti-fall {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(120vh) rotate(360deg); opacity: 0; }
    }

    #finalMessage {
      font-weight: 600;
      font-size: 1.2rem;
    }

    #bonusMessage {
      font-weight: 600;
      color: #ffe3f0;
      min-height: 24px;
    }

    .input-row {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 16px;
    }

    .input-row input {
      padding: 10px 14px;
      border-radius: 12px;
      border: none;
      font-size: 1rem;
      font-family: "Quicksand", sans-serif;
    }

    .fade-in {
      animation: fadeIn 0.8s ease forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 600px) {
      h1 { font-size: 1.8rem; }
      .card { padding: 22px; }
      .heart { font-size: 2rem; }
    }
  </style>
</head>
<body>
  <div class="bokeh" aria-hidden="true">
    <span style="left: 8%; animation-delay: 0s; animation-duration: 16s;"></span>
    <span style="left: 22%; width: 160px; height: 160px; animation-delay: 2s; animation-duration: 20s;"></span>
    <span style="left: 38%; width: 100px; height: 100px; animation-delay: 4s; animation-duration: 18s;"></span>
    <span style="left: 52%; width: 200px; height: 200px; animation-delay: 1s; animation-duration: 22s;"></span>
    <span style="left: 66%; width: 140px; height: 140px; animation-delay: 6s; animation-duration: 19s;"></span>
    <span style="left: 78%; width: 120px; height: 120px; animation-delay: 3s; animation-duration: 17s;"></span>
    <span style="left: 90%; width: 180px; height: 180px; animation-delay: 5s; animation-duration: 21s;"></span>
  </div>
  <!-- Page 1 : √âcran d'accueil -->
  <section id="homeScreen" class="screen">
    <div class="card">
      <h1>Attrape les c≈ìurs üíï</h1>
      <p>Attrape 10 c≈ìurs pour d√©bloquer ta r√©compense‚Ä¶</p>
      <button id="startBtn" class="primary-btn">Commencer üíò</button>
    </div>
  </section>

  <!-- Page 2 : Mini-jeu -->
  <section id="gameScreen" class="screen hidden">
    <div id="gameArea">
      <label class="sound-toggle">
        üîä Son
        <input id="soundToggle" type="checkbox" checked />
      </label>
      <div id="scoreBoard">Score : 0 / 5</div>
      <div id="timerBoard">Temps : 00:00</div>
    </div>
  </section>

  <!-- √âcran de victoire -->
  <section id="victoryScreen" class="screen hidden">
    <div class="card dev-card">
      <h2 class="glow-text">R√©compense d√©bloqu√©e üíñ</h2>
      <p class="fade-in">Veux-tu √™tre ma Valentine ?</p>

      <div class="final-buttons">
        <button id="yesBtn" class="primary-btn">Oui üíï</button>
        <button id="noBtn" class="secondary-btn">Non üòÖ</button>
      </div>

      <p id="funMessages"></p>
      <p id="noErrorMessage"></p>
      <p id="bonusMessage"></p>
      <p id="finalMessage"></p>
      <button id="replayBtn" class="secondary-btn">Rejouer üîÑ</button>
    </div>
  </section>

  <script>
    // === S√©lection des √©l√©ments ===
    const homeScreen = document.getElementById("homeScreen");
    const gameScreen = document.getElementById("gameScreen");
    const victoryScreen = document.getElementById("victoryScreen");
    const startBtn = document.getElementById("startBtn");
    const gameArea = document.getElementById("gameArea");
    const scoreBoard = document.getElementById("scoreBoard");
    const timerBoard = document.getElementById("timerBoard");
    const soundToggle = document.getElementById("soundToggle");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const funMessages = document.getElementById("funMessages");
    const noErrorMessage = document.getElementById("noErrorMessage");
    const bonusMessage = document.getElementById("bonusMessage");
    const finalMessage = document.getElementById("finalMessage");
    const replayBtn = document.getElementById("replayBtn");

    // === Variables du jeu ===
    const targetScore = 10;
    const bonusSeconds = 18;
    let score = 0;
    let startTime = null;
    let timerInterval = null;
    let bonusEarned = false;
    let gameInterval = null;
    let gameActive = false;
    let audioContext = null;
    let playerName = "Eslame";
    const funTextPool = [
      "Bien tent√© üòè",
      "Presque !",
      "Essaie encore üëÄ",
      "Trop rapide !",
      "Nope üòÖ",
      "tu veux mourir ?? üòà",
      "tu m'offre encore un rubik's cube je te tue ?",
      "tu clique dessus t'as plus de fleurs pour la vie üéã",
      "je vais finir par sotir avec un cactus üåµ",
      "tu vas finir celib si tu touches a ce bouton üò≠"
    ];
    const heartPool = [
      { emoji: "üíñ", value: 1 },
      { emoji: "üíò", value: 1 },
      { emoji: "üíó", value: 1 },
      { emoji: "üíõ", value: 2, gold: true }
    ];

    // === D√©marrage ===
    startBtn.addEventListener("click", () => {
      homeScreen.classList.add("hidden");
      gameScreen.classList.remove("hidden");
      startGame();
    });

    // === Cr√©er un c≈ìur ===
    function spawnHeart() {
      if (!gameActive) return;

      const heart = document.createElement("div");
      heart.classList.add("heart");
      const pick = heartPool[Math.floor(Math.random() * heartPool.length)];
      heart.textContent = pick.emoji;
      heart.dataset.value = pick.value;
      if (pick.gold) heart.classList.add("gold");

      const size = 1.6 + Math.random() * 1.6;
      heart.style.fontSize = `${size}rem`;

      const startX = Math.random() * 90 + 5; // en %
      heart.style.left = `${startX}%`;

      const duration = 3.5 + Math.random() * 2.5;
      heart.style.animationDuration = `${duration}s`;

      // Click / tap
      const catchHeart = () => {
        if (!heart.isConnected) return;
        heart.remove();
        updateScore(Number(heart.dataset.value || 1));
        if (soundToggle.checked) playSound();
      };

      heart.addEventListener("click", catchHeart);
      heart.addEventListener("touchstart", catchHeart, { passive: true });

      gameArea.appendChild(heart);

      // Nettoyage automatique
      setTimeout(() => heart.remove(), (duration + 0.2) * 1000);
    }

    // === Mise √† jour du score ===
    function updateScore(value) {
      if (!gameActive) return;
      score += value;
      scoreBoard.textContent = `Score : ${score} / ${targetScore}`;

      if (score >= targetScore) {
        endGame();
      }
    }

    function updateTimer() {
      if (!startTime) return;
      const elapsed = Math.floor((Date.now() - startTime) / 1000);
      const mins = String(Math.floor(elapsed / 60)).padStart(2, "0");
      const secs = String(elapsed % 60).padStart(2, "0");
      timerBoard.textContent = `Temps : ${mins}:${secs}`;
    }

    // === D√©marrer le jeu ===
    function startGame() {
      score = 0;
      bonusEarned = false;
      scoreBoard.textContent = `Score : ${score} / ${targetScore}`;
      bonusMessage.textContent = "";
      noErrorMessage.textContent = "";
      funMessages.textContent = "";
      finalMessage.textContent = "";
      gameActive = true;
      startTime = Date.now();
      updateTimer();
      timerInterval = setInterval(updateTimer, 500);
      gameInterval = setInterval(spawnHeart, 450);
    }

    // === Fin du jeu ===
    function endGame() {
      gameActive = false;
      clearInterval(gameInterval);
      clearInterval(timerInterval);

      const elapsed = Math.floor((Date.now() - startTime) / 1000);
      if (elapsed <= bonusSeconds) {
        bonusEarned = true;
        bonusMessage.textContent = `Bonus rapide +2 ‚ú® (‚â§ ${bonusSeconds}s)`;
      } else {
        bonusMessage.textContent = "";
      }

      // Nettoyer les c≈ìurs restants
      document.querySelectorAll(".heart").forEach((heart) => heart.remove());

      gameScreen.classList.add("hidden");
      victoryScreen.classList.remove("hidden");
    }

    // === Bouton NON qui esquive ===
    function moveNoButton() {
      const parent = noBtn.parentElement;
      const parentRect = parent.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();

      const maxX = parentRect.width - btnRect.width;
      const maxY = parentRect.height - btnRect.height;

      const newX = Math.random() * maxX;
      const newY = Math.random() * maxY;

      noBtn.style.position = "absolute";
      noBtn.style.left = `${newX}px`;
      noBtn.style.top = `${newY}px`;
      noBtn.classList.remove("shake");
      void noBtn.offsetWidth;
      noBtn.classList.add("shake");

      const randomText = funTextPool[Math.floor(Math.random() * funTextPool.length)];
      funMessages.textContent = randomText;
    }

    ["mouseover", "touchstart"].forEach((evt) => {
      noBtn.addEventListener(evt, moveNoButton, { passive: true });
    });

    noBtn.addEventListener("click", () => {
      window.location.assign("404.html");
    });

    // === Bouton OUI ===
    yesBtn.addEventListener("click", () => {
      launchConfetti();
      finalMessage.textContent = `Moooh tu sais que je t'aime ma petite ${playerName} d'amour !! poutoupoutou üíñüíòüíó‚ù§Ô∏è`;
      finalMessage.classList.add("fade-in");
    });

    // === Confettis ===
    function launchConfetti() {
      const colors = ["#fff", "#ffd1dc", "#ff9eb5", "#ff4f7b", "#ffb3c7"];
      for (let i = 0; i < 80; i += 1) {
        const confetti = document.createElement("div");
        const isHeart = Math.random() > 0.6;
        confetti.className = "confetti";
        confetti.style.left = `${Math.random() * 100}%`;
        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animationDelay = `${Math.random() * 0.6}s`;
        confetti.style.transform = `translateY(-10px) rotate(${Math.random() * 360}deg)`;
        if (isHeart) {
          confetti.textContent = ["üíñ", "üíò", "üíó", "‚ù§Ô∏è"][Math.floor(Math.random() * 4)];
          confetti.style.background = "transparent";
          confetti.style.fontSize = `${12 + Math.random() * 16}px`;
          confetti.style.width = "auto";
          confetti.style.height = "auto";
        }
        document.body.appendChild(confetti);

        setTimeout(() => confetti.remove(), 2000);
      }
    }

    function playSound() {
      if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
      }
      const osc = audioContext.createOscillator();
      const gain = audioContext.createGain();
      osc.type = "sine";
      osc.frequency.value = 520;
      gain.gain.value = 0.08;
      osc.connect(gain);
      gain.connect(audioContext.destination);
      osc.start();
      gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.15);
      osc.stop(audioContext.currentTime + 0.16);
    }

    replayBtn.addEventListener("click", () => {
      victoryScreen.classList.add("hidden");
      homeScreen.classList.remove("hidden");
    });

    // === Pr√©venir le scroll sur mobile ===
    document.addEventListener("touchmove", (event) => {
      if (gameScreen.classList.contains("hidden")) return;
      event.preventDefault();
    }, { passive: false });
  </script>
</body>
</html>
